# blaupause ![Travis](https://img.shields.io/travis/fspoettel/blaupause.svg?maxAge=2592000?style=flat-square)

[![Greenkeeper badge](https://badges.greenkeeper.io/fspoettel/blaupause.svg)](https://greenkeeper.io/)

> Blaupause is a developer-friendly Hugo starter kit based around npm scripts. It comes es6-ready with helpers for SVG and a basic structure for the html, css and javascript. For a detailed listing of what is included, see "In the box".

## Installation

This project depends on [Hugo](https://gohugo.io) and [Node](http://nodejs.org/) being installed on your machine. To initiate a new site, do:

1. `git clone https://github.com/felics/blaupause project`
2. `cd project`
3. `npm install` or `yarn`
4. `gulp`

## In the box

* [NPM scripts](http://gulpjs.com/)-based, automatic builds
* [BrowserSync](http://www.browsersync.io/) live-reloading environment
* `Developer Mode` with `Sourcemaps` and debugging helpers
* `Production Mode` for optimized builds

### JS

* [Webpack](http://webpack.github.io)
* [Babel](babeljs.io)
* [ESLint](http://eslint.org/)
* [Unit tests via Jest](https://facebook.github.io/jest/)

### CSS

* [Autoprefixer](https://github.com/postcss/autoprefixer)
* [PostCSS-import](http://cssnext.io/)
* [Stylelint](http://stylelint.io/)
* [Sanitize.css](https://github.com/10up/sanitize.css) and a couple of useful mixins

### Static Site Generator

* [Hugo](https://gohugo.io)[1] with a minimal `layout`-boilerplate

### Images/SVG

* [svg-sprite](https://github.com/jkphl/svg-sprite) to generate SVG symbol sprites

### Dev Tools

* [EditorConfig](http://editorconfig.org/)
* [Travis](https://travis-ci.org)-based tests
* (Example) Automatic Travis deployment to Github Pages

[1] Due to the structure of this repository, **Hugo Themes are not supported**.

## Tasks & Configuration

### Basic Configuration

The build configuration is setup in `package.json` and `./hugo/config.yaml`.

``` md
# ./hugo/config.yaml

# The baseurl of the build artifact. Ignored in development mode
baseurl: "http://fspoettel.github.io/blaupause/"

# The rest of the file is a "normal" Hugo config. Check the hugo docs to see how it works if you are not familiar with it
```
### Tasks & Task Configuration

All resource tasks have a `compile`, `build` and `watch` task associated with them. `compile` builds the source when developing, while `build` applies further optimizations for production builds. `watch` starts a file-watcher and executes `compile` on changes, although you should not need to run these tasks by themselves (use the `npm run start`) shortcut).

#### `npm run start`

Runs `build` and starts a BrowserSync instance. Whenever you change a source file, the BrowserSync instance will reload your connected browsers with the changes.

#### `npm run build`

Builds all content and assets from `src` to `public`. Generates a production-ready build ("real" BaseURL, no drafts, no sourcemaps, `NODE_ENV = "production"` for JS builds, Autoprefixer, uglified code)

#### `npm run build:clean`

Removes the `public`-folder (executed automatically on `gulp build`).

#### `npm run start:prod`

Runs a server with production-ready code.

### `npm run lint`

Runs eslint & stylelint against your code.

### `npm run test`

Runs jest unit tests

## Hugo Partials

#### image/svg

Reference a SVG-symbol from `/static/svg/sprite.symbol.svg#` by ID. SVGs are generated by `gulp svg:build` in the default build.

``` html
  <div class="icon">{{ partial "image/svg" (dict "id" "the-icon" "class" "optional-class") }}</div>
```

## Deploy

The build product can be deployed practically anywhere since it is just a static html page. This repository serves as an example on how to deploy to `gh-pages`.

* `./hugo/config.yaml{baseurl}` is set to the real path of the site
* Travis is set up to automatically run `./internals/scripts/deploy.sh` after a successful build of the docs-branch. `deploy.sh` runs `gulp build -p` and force-pushes the build-folder to the `gh-pages`-branch (for more information on how to set up Travis-deployment to `gh-pages`, check out [steveklabnik/automatically_update_github_pages_with_travis_example](https://github.com/steveklabnik/automatically_update_github_pages_with_travis_example)).
